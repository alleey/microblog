<blog-post [headerTemplate]="postHeader" [contentTemplate]="postContents" [footerTemplate]="postFooter">
</blog-post>

<ng-template #postHeader let-item let-control="list">
    <div class="d-flex justify-content-between">
        <div>
            <h2 class="blog-post-list-post-title">{{item.title}}</h2>
            <div class="created my-2">
                <user-profile-badge [userid]="item.owner"></user-profile-badge>
                <span *authRequireOwner="item.owner different 'yes'" class="mx-1">
                    <follower-badge [userid]="item.owner" class="mx-1"></follower-badge>
                    <following-badge [userid]="item.owner" class="mx-1"></following-badge>
                </span>
                posted
                {{item.createdOn | prettyDate}}.
            </div>
            <div class="d-flex">
                <counter-stats [caption]="'Views'" [counterId]="'post.views:' + item.id"></counter-stats>
                <counter-stats class="ml-1" [caption]="'Likes'" [counterId]="'post.likes:' + item.id"></counter-stats>
            </div>
        </div>
        <div class="d-flex justify-content-between">
            <div class="ml-1" *authRequireOwner="item.owner different 'yes'">
                <toggle-counter-badge [activeCaption]="'Like'" [counterId]="'post.likes:' + item.id"></toggle-counter-badge>
            </div>
            <div class="ml-1">
                <bookmark-badge [url]="item.permalink" [caption]="item.title" *authRequireLogin="'yes'"></bookmark-badge>
            </div>
            <div class="ml-1" *authRequireOwner="item.owner">
                <a class="btn btn-success" role="button" (click)="control.selectItem(item, 'edit')">Edit</a>
            </div>
            <div class="ml-1" *authRequireOwner="item.owner">
                <a class="btn btn-success" role="button" (click)="control.selectItem(item, 'delete')">Delete</a>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #postContents let-item let-control="list">
    <p class="posttext py-2">
        {{item.text}}
    </p>

    <h5>Posted under Topics:</h5>
    <blog-topic-list-view [items]="item.topics"></blog-topic-list-view>

    <div *ngIf="control.enableComments" class="mt-3">
        <comment-editor [updateMode]="false" *authRequireLogin="'yes'"></comment-editor>
        <hr class="my-4">
        <h5>Comments:</h5>
        <div class="mb-3 col-sm-12">
            <blog-comment-list [postId]="item.id" [itemTemplate]="commentContents">
            </blog-comment-list>
        </div>
    </div>
</ng-template>

<ng-template #postFooter let-item let-control="list">
</ng-template>

<ng-template #commentContents let-item>
    <div class="created">
        <user-profile-badge [userid]="item.owner"></user-profile-badge>
        commented on {{ item.createdOn | prettyDate }}.
    </div>
    <p class="posttext ">
        {{item.text}}
    </p>
    <hr class="my-4">
</ng-template>